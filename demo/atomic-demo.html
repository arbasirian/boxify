<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Boxify Atomic CSS Demo</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f5f5f5;
      }

      .demo-section {
        margin-bottom: 40px;
        padding: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .demo-title {
        color: #333;
        border-bottom: 2px solid #007acc;
        padding-bottom: 10px;
        margin-bottom: 20px;
      }

      .css-inspector {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        padding: 15px;
        margin: 15px 0;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 12px;
        overflow-x: auto;
      }

      .css-inspector h4 {
        margin: 0 0 10px 0;
        color: #495057;
      }

      .css-class {
        background: #e3f2fd;
        color: #1976d2;
        padding: 2px 6px;
        border-radius: 3px;
        margin: 2px;
        display: inline-block;
      }

      .css-variable {
        background: #f3e5f5;
        color: #7b1fa2;
        padding: 2px 6px;
        border-radius: 3px;
        margin: 2px;
        display: inline-block;
      }

      .responsive-demo {
        border: 2px dashed #007acc;
        padding: 20px;
        margin: 20px 0;
      }

      .breakpoint-info {
        background: #fff3e0;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
        border-left: 4px solid #ff9800;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Mock implementation of the new atomic CSS Box component
      const Box = ({
        children,
        className = "",
        as: Component = "div",
        style = {},
        mobile,
        tablet,
        desktop,
        ...props
      }) => {
        // Generate atomic CSS classes for static properties
        const staticClasses = [];
        const dynamicClasses = [];
        const cssVariables = {};
        
        // Static properties that get atomic classes
        const staticProps = [
          'display', 'position', 'top', 'right', 'bottom', 'left', 'zIndex',
          'margin', 'marginTop', 'marginRight', 'marginBottom', 'marginLeft',
          'padding', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft',
          'border', 'borderRadius', 'backgroundColor', 'backgroundImage',
          'fontSize', 'fontWeight', 'textAlign', 'flexDirection', 'justifyContent',
          'alignItems', 'flexWrap', 'flex', 'gridTemplateColumns', 'gridTemplateRows',
          'gap', 'transform', 'transition', 'overflow', 'overflowX', 'overflowY',
          'boxShadow', 'cursor'
        ];
        
        // Dynamic properties that use CSS variables
        const dynamicProps = ['width', 'height', 'minWidth', 'minHeight', 'maxWidth', 'maxHeight'];
        
        // Generate static classes
        for (const prop of staticProps) {
          if (props[prop] !== undefined) {
            const hash = hashCSSDeclaration(prop, String(props[prop]));
            const className = `bx_${prop.replace(/[A-Z]/g, (char) => `_${char.toLowerCase()}`)}_${hash}`;
            staticClasses.push(className);
          }
        }
        
        // Generate dynamic classes and CSS variables
        for (const prop of dynamicProps) {
          if (props[prop] !== undefined) {
            const className = `bx_${prop.replace(/[A-Z]/g, (char) => `_${char.toLowerCase()}`)}`;
            dynamicClasses.push(className);
            cssVariables[`--bx-${prop}`] = String(props[prop]);
          }
        }
        
        // Generate responsive classes
        const responsiveClasses = [];
        if (mobile) {
          for (const [prop, value] of Object.entries(mobile)) {
            if (value !== undefined) {
              if (dynamicProps.includes(prop)) {
                responsiveClasses.push(`bx_${prop.replace(/[A-Z]/g, (char) => `_${char.toLowerCase()}`)}--mobile`);
                cssVariables[`--bx-${prop}-mobile`] = String(value);
              } else {
                const hash = hashCSSDeclaration(prop, String(value));
                responsiveClasses.push(`bx_${prop.replace(/[A-Z]/g, (char) => `_${char.toLowerCase()}`)}_${hash}--mobile`);
              }
            }
          }
        }
        
        if (tablet) {
          for (const [prop, value] of Object.entries(tablet)) {
            if (value !== undefined) {
              if (dynamicProps.includes(prop)) {
                responsiveClasses.push(`bx_${prop.replace(/[M-Z]/g, (char) => `_${char.toLowerCase()}`)}--tablet`);
                cssVariables[`--bx-${prop}-tablet`] = String(value);
              } else {
                const hash = hashCSSDeclaration(prop, String(value));
                responsiveClasses.push(`bx_${prop.replace(/[A-Z]/g, (char) => `_${char.toLowerCase()}`)}_${hash}--tablet`);
              }
            }
          }
        }
        
        if (desktop) {
          for (const [prop, value] of Object.entries(desktop)) {
            if (value !== undefined) {
              if (dynamicProps.includes(prop)) {
                responsiveClasses.push(`bx_${prop.replace(/[A-Z]/g, (char) => `_${char.toLowerCase()}`)}--desktop`);
                cssVariables[`--bx-${prop}-desktop`] = String(value);
              } else {
                const hash = hashCSSDeclaration(prop, String(value));
                responsiveClasses.push(`bx_${prop.replace(/[A-Z]/g, (char) => `_${char.toLowerCase()}`)}_${hash}--desktop`);
              }
            }
          }
        }
        
        // Combine all classes
        const allClasses = [
          ...staticClasses,
          ...dynamicClasses,
          ...responsiveClasses,
          className
        ].filter(Boolean).join(' ');
        
        // Combine CSS variables with user style
        const finalStyle = { ...cssVariables, ...style };
        
        return React.createElement(
          Component,
          { 
            className: allClasses, 
            style: finalStyle,
            'data-boxify-classes': allClasses,
            'data-boxify-vars': JSON.stringify(cssVariables)
          },
          children
        );
      };
      
      // Simple hash function for demo purposes
      function hashCSSDeclaration(property, value) {
        const str = `${property}:${value}`;
        let hash = 0;
        for (let i = 0; i < str.length; i++) {
          const char = str.charCodeAt(i);
          hash = ((hash << 5) - hash) + char;
          hash = hash & hash;
        }
        return Math.abs(hash).toString(36);
      }

      const DemoApp = () => {
        const [windowWidth, setWindowWidth] = useState(window.innerWidth);

        useEffect(() => {
          const handleResize = () => setWindowWidth(window.innerWidth);
          window.addEventListener("resize", handleResize);
          return () => window.removeEventListener("resize", handleResize);
        }, []);

        const getBreakpoint = () => {
          if (windowWidth >= 1024) return "desktop";
          if (windowWidth >= 768) return "tablet";
          return "mobile";
        };

        return (
          <div>
            <h1 style={{ textAlign: "center", color: "#333" }}>
              ðŸŽ¯ Boxify Atomic CSS Demo
            </h1>

            <div className="breakpoint-info">
              <strong>Current Breakpoint:</strong> {getBreakpoint()}
              <br />
              <strong>Window Width:</strong> {windowWidth}px
            </div>

            <div className="demo-section">
              <h2 className="demo-title">1. Static Properties â†’ Atomic CSS Classes</h2>
              
              <Box
                display="flex"
                justifyContent="center"
                alignItems="center"
                backgroundColor="lightblue"
                padding="20px"
                borderRadius="8px"
                margin="10px 0"
              >
                This Box uses atomic CSS classes for static properties
              </Box>
              
              <div className="css-inspector">
                <h4>Generated CSS Classes:</h4>
                <div>
                  <span className="css-class">bx_display_flex</span>
                  <span className="css-class">bx_justify_content_center</span>
                  <span className="css-class">bx_align_items_center</span>
                  <span className="css-class">bx_background_color_lightblue</span>
                  <span className="css-class">bx_padding_20px</span>
                  <span className="css-class">bx_border_radius_8px</span>
                  <span className="css-class">bx_margin_10px 0</span>
                </div>
              </div>
            </div>

            <div className="demo-section">
              <h2 className="demo-title">2. Dynamic Properties â†’ CSS Variables</h2>
              
              <Box
                width="300px"
                height="100px"
                minHeight="80px"
                backgroundColor="lightgreen"
                padding="15px"
                borderRadius="4px"
              >
                This Box uses CSS variables for dynamic properties
              </Box>
              
              <div className="css-inspector">
                <h4>Generated CSS Classes:</h4>
                <div>
                  <span className="css-class">bx_width</span>
                  <span className="css-class">bx_height</span>
                  <span className="css-class">bx_min_height</span>
                  <span className="css-class">bx_background_color_lightgreen</span>
                  <span className="css-class">bx_padding_15px</span>
                  <span className="css-class">bx_border_radius_4px</span>
                </div>
                <h4>CSS Variables:</h4>
                <div>
                  <span className="css-variable">--bx-width: 300px</span>
                  <span className="css-variable">--bx-height: 100px</span>
                  <span className="css-variable">--bx-min-height: 80px</span>
                </div>
              </div>
            </div>

            <div className="demo-section">
              <h2 className="demo-title">3. Responsive Properties â†’ Breakpoint Classes</h2>
              
              <Box
                display="block"
                width="100%"
                backgroundColor="lightcoral"
                padding="20px"
                mobile={{
                  display: "block",
                  width: "100%",
                  padding: "15px"
                }}
                tablet={{
                  display: "flex",
                  width: "50%",
                  padding: "25px"
                }}
                desktop={{
                  display: "grid",
                  width: "33.33%",
                  padding: "30px"
                }}
              >
                <div>Responsive Box</div>
                <div>Adapts to breakpoints</div>
              </Box>
              
              <div className="css-inspector">
                <h4>Generated CSS Classes:</h4>
                <div>
                  <span className="css-class">bx_display_block</span>
                  <span className="css-class">bx_width</span>
                  <span className="css-class">bx_background_color_lightcoral</span>
                  <span className="css-class">bx_padding_20px</span>
                  <span className="css-class">bx_display_block--mobile</span>
                  <span className="css-class">bx_width--mobile</span>
                  <span className="css-class">bx_padding_15px--mobile</span>
                  <span className="css-class">bx_display_flex--tablet</span>
                  <span className="css-class">bx_width--tablet</span>
                  <span className="css-class">bx_padding_25px--tablet</span>
                  <span className="css-class">bx_display_grid--desktop</span>
                  <span className="css-class">bx_width--desktop</span>
                  <span className="css-class">bx_padding_30px--desktop</span>
                </div>
                <h4>CSS Variables:</h4>
                <div>
                  <span className="css-variable">--bx-width: 100%</span>
                  <span className="css-variable">--bx-width-mobile: 100%</span>
                  <span className="css-variable">--bx-width-tablet: 50%</span>
                  <span className="css-variable">--bx-width-desktop: 33.33%</span>
                  <span className="css-variable">--bx-padding-mobile: 15px</span>
                  <span className="css-variable">--bx-padding-tablet: 25px</span>
                  <span className="css-variable">--bx-padding-desktop: 30px</span>
                </div>
              </div>
            </div>

            <div className="demo-section">
              <h2 className="demo-title">4. Complex Layout with Atomic CSS</h2>
              
              <Box
                display="flex"
                flexDirection="column"
                gap="20px"
                backgroundColor="lightyellow"
                padding="20px"
                borderRadius="8px"
                tablet={{
                  flexDirection: "row",
                  gap: "30px"
                }}
              >
                <Box
                  flex="1"
                  backgroundColor="white"
                  padding="15px"
                  borderRadius="4px"
                  border="1px solid #ddd"
                >
                  <h3>Card 1</h3>
                  <p>This demonstrates how atomic CSS classes are composed.</p>
                </Box>
                
                <Box
                  flex="1"
                  backgroundColor="white"
                  padding="15px"
                  borderRadius="4px"
                  border="1px solid #ddd"
                >
                  <h3>Card 2</h3>
                  <p>Each property generates a unique, reusable CSS class.</p>
                </Box>
              </Box>
            </div>

            <div className="demo-section">
              <h2 className="demo-title">5. Benefits of Atomic CSS System</h2>
              
              <div style={{ lineHeight: 1.6 }}>
                <h3>âœ… Performance Improvements:</h3>
                <ul>
                  <li><strong>No inline styles:</strong> CSS classes are generated once and reused</li>
                  <li><strong>Better caching:</strong> Same props always generate same class names</li>
                  <li><strong>Smaller bundle:</strong> CSS rules are shared across components</li>
                  <li><strong>CSS features:</strong> Now supports :hover, media queries, and more</li>
                </ul>
                
                <h3>âœ… Developer Experience:</h3>
                <ul>
                  <li><strong>Same API:</strong> No breaking changes to existing code</li>
                  <li><strong>TypeScript support:</strong> Full type safety maintained</li>
                  <li><strong>SSR ready:</strong> Server-side rendering support</li>
                  <li><strong>Debugging:</strong> Easy to inspect generated CSS classes</li>
                </ul>
                
                <h3>âœ… CSS Features Now Available:</h3>
                <ul>
                  <li><strong>Pseudo-classes:</strong> :hover, :focus, :active</li>
                  <li><strong>Media queries:</strong> Responsive breakpoints</li>
                  <li><strong>CSS animations:</strong> Transitions and keyframes</li>
                  <li><strong>CSS custom properties:</strong> Dynamic values via variables</li>
                </ul>
              </div>
            </div>
          </div>
        );
      };

      ReactDOM.render(<DemoApp />, document.getElementById("root"));
    </script>
  </body>
</html>
